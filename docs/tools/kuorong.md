# 不过是扩容什么的

## 前言

没啥好说的，就是在不重装虚拟机的前提下直接扩容（某位二字同学想当年虚拟机重装了哈哈哈哈哈哈）

## 原文链接

[VMware虚拟机下ubuntu磁盘扩容（亲测有效）]([VMware虚拟机下ubuntu磁盘扩容（亲测有效）-腾讯云开发者社区-腾讯云 (tencent.com)](https://cloud.tencent.com/developer/article/2109290))

## 优化版本（修改了部分步骤）

### 1.关机

首先将要扩容磁盘的ubuntu虚拟机关闭，我们要给自己的虚拟机扩展为130G。处于关机状态后，点击编辑虚拟机设置。

### 2.设置扩容

设置界面点击要扩展的硬盘，右边会出现磁盘实用工具，点击下面的扩展按钮。这个时候会弹出新窗口，让你输入新硬盘大小。输入130G，然后点击扩展。它就扩展成功了，会提示你需要进系统进行分区。点击确定保存。

### 3.开机看信息

重新将ubuntu虚拟机开机，然后打开terminal终端。使用命令：df -h 查看硬盘信息，我是能看见sda2和3

![old](./old.png)

### 4.备份状态

先点击vmware软件界面上的添加快照功能给你的虚拟机创建一个快照。这样后面的操作失败了，也可以一键回到操作之前的环境（别告我不知道从哪备份）

![kz](./kz.png)

### 5.打开Terminal

输入`sudo fdisk /dev/sda`

进入fdisk之后按d对现在存在的sda开头的分区进行删除，以便我们接下来新建立的分区(我是删的sda3，原来20G它占了19G，而且只删了这一个，sda2不用管)

然后输入n，回车，3（因为我只删了3所以只用new一个3），回车,回车

![d3n3](./d3n3.png)

没记错的话下面应该是让你输入y/n，输入y即可

![y](./y.png)

然后输入w，回车

### 6.重启

输入`sudo reboot`

### 7.再打开Terminal

输入`sudo resize2fs /dev/sda3`（这里sda3是因为我前面只改了sda3）

命令执行成功后，输入命令：`df -h `

### 7.1成功

如果显示如下图则成功

![success](./success.png)

### 7.2失败

如果没有变大就是失败，点击将次计算机恢复到其父快照即可（备份右边那个键）

### 8.完工！芜湖

查看硬盘挂载信息，这个时候看到的已经是130G的根目录了。磁盘的大小成功地扩容了。